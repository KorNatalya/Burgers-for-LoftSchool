let jsonReviews = {
    "reviews": [
        {
            "name": "Екатерина Кларк",
            "pic": "./img/photos/photo-1.jpg",
            "short_text": "Мысли все о них и о них, о них и о них. Нельзя устоять, невозможно забыть... Никогда не думал, что булочки могут быть такими мягкими, котлетка такой сочной, а сыр таким расплавленным.",
            "long_text": "Мысли все о них и о них, о них и о них. Нельзя устоять, невозможно забыть... Никогда не думал, что булочки могут быть такими мягкими, котлетка такой сочной, а сыр таким расплавленным. Мысли все о них и о них, о них и о них. Нельзя устоять, невозможно забыть... Никогда не думал, что булочки могут быть такими мягкими, котлетка такой сочной, а сыр таким расплавленным."
        },
        {
            "name": "Константин Спилберг",
            "pic": "./img/photos/photo-2.jpg",
            "short_text": "Мысли все о них и о них, о них и о них. Нельзя устоять, невозможно забыть... Никогда не думал, что булочки могут быть такими мягкими, котлетка такой сочной, а сыр таким расплавленным.",
            "long_text": "Мысли все о них и о них, о них и о них. Нельзя устоять, невозможно забыть... Никогда не думал, что булочки могут быть такими мягкими, котлетка такой сочной, а сыр таким расплавленным. Мысли все о них и о них, о них и о них. Нельзя устоять, невозможно забыть... Никогда не думал, что булочки могут быть такими мягкими, котлетка такой сочной, а сыр таким расплавленным."
        },
        {
            "name": "Анна Миллер",
            "pic": "./img/photos/photo-3.jpg",
            "short_text": "Мысли все о них и о них, о них и о них. Нельзя устоять, невозможно забыть... Никогда не думал, что булочки могут быть такими мягкими, котлетка такой сочной, а сыр таким расплавленным.",
            "long_text": "Мысли все о них и о них, о них и о них. Нельзя устоять, невозможно забыть... Никогда не думал, что булочки могут быть такими мягкими, котлетка такой сочной, а сыр таким расплавленным. Мысли все о них и о них, о них и о них. Нельзя устоять, невозможно забыть... Никогда не думал, что булочки могут быть такими мягкими, котлетка такой сочной, а сыр таким расплавленным."
        },
        {
            "name": "Егор Фостер",
            "pic": "./img/photos/photo-4.jpg",
            "short_text": "Мысли все о них и о них, о них и о них. Нельзя устоять, невозможно забыть... Никогда не думал, что булочки могут быть такими мягкими, котлетка такой сочной, а сыр таким расплавленным.",
            "long_text": "Мысли все о них и о них, о них и о них. Нельзя устоять, невозможно забыть... Никогда не думал, что булочки могут быть такими мягкими, котлетка такой сочной, а сыр таким расплавленным. Мысли все о них и о них, о них и о них. Нельзя устоять, невозможно забыть... Никогда не думал, что булочки могут быть такими мягкими, котлетка такой сочной, а сыр таким расплавленным."
        },
        {
            "name": "Андрей Харрис",
            "pic": "./img/photos/photo-5.jpg",
            "short_text": "Мысли все о них и о них, о них и о них. Нельзя устоять, невозможно забыть... Никогда не думал, что булочки могут быть такими мягкими, котлетка такой сочной, а сыр таким расплавленным.",
            "long_text": "Мысли все о них и о них, о них и о них. Нельзя устоять, невозможно забыть... Никогда не думал, что булочки могут быть такими мягкими, котлетка такой сочной, а сыр таким расплавленным. Мысли все о них и о них, о них и о них. Нельзя устоять, невозможно забыть... Никогда не думал, что булочки могут быть такими мягкими, котлетка такой сочной, а сыр таким расплавленным."
        },
        {
            "name": "Мария Батлер",
            "pic": "./img/photos/photo-6.jpg",
            "short_text": "Мысли все о них и о них, о них и о них. Нельзя устоять, невозможно забыть... Никогда не думал, что булочки могут быть такими мягкими, котлетка такой сочной, а сыр таким расплавленным.",
            "long_text": "Мысли все о них и о них, о них и о них. Нельзя устоять, невозможно забыть... Никогда не думал, что булочки могут быть такими мягкими, котлетка такой сочной, а сыр таким расплавленным. Мысли все о них и о них, о них и о них. Нельзя устоять, невозможно забыть... Никогда не думал, что булочки могут быть такими мягкими, котлетка такой сочной, а сыр таким расплавленным."
        },
        {
            "name": "Александр Мур",
            "pic": "./img/photos/photo-7.jpg",
            "short_text": "Мысли все о них и о них, о них и о них. Нельзя устоять, невозможно забыть... Никогда не думал, что булочки могут быть такими мягкими, котлетка такой сочной, а сыр таким расплавленным.",
            "long_text": "Мысли все о них и о них, о них и о них. Нельзя устоять, невозможно забыть... Никогда не думал, что булочки могут быть такими мягкими, котлетка такой сочной, а сыр таким расплавленным. Мысли все о них и о них, о них и о них. Нельзя устоять, невозможно забыть... Никогда не думал, что булочки могут быть такими мягкими, котлетка такой сочной, а сыр таким расплавленным."
        },
        {
            "name": "Владимир Коллинс",
            "pic": "./img/photos/photo-8.jpg",
            "short_text": "Мысли все о них и о них, о них и о них. Нельзя устоять, невозможно забыть... Никогда не думал, что булочки могут быть такими мягкими, котлетка такой сочной, а сыр таким расплавленным.",
            "long_text": "Мысли все о них и о них, о них и о них. Нельзя устоять, невозможно забыть... Никогда не думал, что булочки могут быть такими мягкими, котлетка такой сочной, а сыр таким расплавленным. Мысли все о них и о них, о них и о них. Нельзя устоять, невозможно забыть... Никогда не думал, что булочки могут быть такими мягкими, котлетка такой сочной, а сыр таким расплавленным."
        }
    ]
};


// SLIDER


let left = document.querySelector(".slider__arrow--prev");
let right = document.querySelector(".slider__arrow--next");
let list = document.querySelector(".slider__list");

let minRight = 0;
let maxRight = 3760;
let step = 940;
let currentRight = 0;

right.addEventListener('click', function () {
    event.preventDefault();
    if (currentRight < maxRight) {
        currentRight += step;
        list.style.right = currentRight + "px";
    }
});

left.addEventListener('click', function () {
    event.preventDefault();
    if (currentRight > minRight) {
        currentRight -= step;
        list.style.right = currentRight + "px";
    }
});


//

// (function () {
//     let slider = document.querySelector('.slider');
//     let sliderList = document.querySelector('.slider__list');
//     let arrows = document.querySelector('.slider__arrow');
//     let activeItem = null;
//     let step = 100;
//     let itemPos = 0;
//
//     arrows.addEventListener('click', (event)=>{
//         event.preventDefault();
//         activeItem = slider.querySelector('.active');
//         console.log(activeItem);
//         if (event.target.classList.contains('.slider__arrow--next')){
//             if (activeItem.nextElementSibling) {
//                 slideTo('next');
//             }
//         } else {
//             if (activeItem.previousElementSibling) {
//                 slideTo('prev');
//             }
//         }
//     });
//     function slideTo(vector) {
//         if(vector === "next"){
//             itemPos += step;
//             activeItem.nextElementSibling.classList.add('active');
//         } else {
//             itemPos -= step;
//             activeItem.previousElementSibling.classList.add('active');
//         }
//         sliderList.style.trnsform = 'translateX(${-itemPos}%)';
//         activeItem.classList.remove('active');
//     }
// })();

// АККОРДЕОН Вертикальный
(function () {
    const teamAccoList = document.querySelector('.team-acco__list');
    teamAccoList.addEventListener('click', (event) => {
        if (event.target.classList.contains('team-acco__trigger')) {
            const _this = event.target;
            const item = _this.parentNode;
            const list = item.parentNode;
            const items = list.children;
            const content = _this.nextElementSibling;
            const contentHeight = content.firstElementChild.clientHeight;
            event.preventDefault();

            if (!item.classList.contains('team-acco__item--active')) {
                for (let i = 0; i < items.length; i++) {
                    items[i].classList.remove('team-acco__item--active');
                    items[i].lastElementChild.style.height = 0;
                }
                item.classList.add('team-acco__item--active');
                content.style.height = contentHeight + 'px';
            } else {
                item.classList.remove('team-acco__item--active');
                content.style.height = 0;
            }
        }
    });
})();


// АККОРДЕОН горизонтальный
$(document).ready(function () {

    var menuTrigger = function (e) {
        let $this = $(this);
        let containerM = $this.closest('.menu-acco__list');
        let itemM = $this.closest('.menu-acco__item');
        let itemsM = containerM.find('.menu-acco__item');
        let activeItemM = itemsM.filter('.menu-acco__item--active');
        let contentM = itemM.find('.menu-acco__content');
        let activeContentM = activeItemM.find('.menu-acco__content');
        e.preventDefault();

        if (itemM.hasClass('menu-acco__item--active')) {
            itemM.removeClass('menu-acco__item--active');
            contentM.slideUp('3000');
        } else {
            itemsM.removeClass('menu-acco__item--active');
            itemM.addClass('menu-acco__item--active');
            activeContentM.slideDown('3000');
            contentM.slideDown('3000');
        }
    };

    $('.menu-acco__trigger').on('click', menuTrigger);
    $('.menu-acco__img').on('click', menuTrigger);


// ПОЛНОЭКРАННОЕ МЕНЮ
    const fullPageNav = document.querySelector('#navTab');
    const maxTop = 0;
    const step = 100;

    let currentTop = -100;


    $('#openMenu').on('click', function () {
        if (currentTop < maxTop) {
            currentTop += step;
            fullPageNav.style.top = currentTop + '%';
        }
    });

    $('#hide').on('click', function () {
        if (currentTop >= maxTop) {
            currentTop -= step;
            fullPageNav.style.top = currentTop + '%';
        }
    });


// ОТЗЫВЫ
    $(jsonReviews.reviews).each(function (index, value) {
        render(value);
    });

    /**
     * @param element
     */
    function create(element = {}) {
        if (element instanceof Object
            && element.hasOwnProperty('name')
        ) {
            let elem = document.createElement(element.name);
            if (element.hasOwnProperty('text')) {
                elem.textContent = element.text;
            }
            if (
                'a' === element.name
                && element.hasOwnProperty('link')
            ) {
                elem.setAttribute('href', element.link);
            }
            if (element.hasOwnProperty('style')) {
                elem.style = element.style;
            }
            if (
                'img' === element.name
                && element.hasOwnProperty('src')
                && element.hasOwnProperty('alt')
            ) {
                elem.src = element.src;
            }
            if (element.hasOwnProperty('value')) {
                elem.value = element.value;
            }
            if (element.hasOwnProperty('className')) {
                elem.className = element.className;
            }
            return elem;
        }
        return create({
            name: 'div',
            text: 'Error!',
        });
    }

    function render(dataJson) {
        let modal_form = create({
            name: 'div',
            className: 'modal_form'
        });
        let modal_close = create({
            name: 'div',
            className: 'modal_close'
        });
        let img = create({
            name: 'img',
            src: './icons/x_orange.png',
            alt: 'X'
        });
        let modal_form_name = create({
            name: 'p',
            className: 'modal_form_name',
            text: dataJson.name
        });
        let long_text = create({
            name: 'p',
            className: 'long_text',
            text: dataJson.long_text
        });
        let reviews__item = create({
            name: 'li',
            className: 'reviews__item'
        });
        let review = create({
            name: 'div',
            className: 'review'
        });
        let review__picture = create({
            name: 'div',
            className: 'review__picture',
            style: 'background-image: url(' + dataJson.pic + ');'
        });
        let review__hover = create({
            name: 'div',
            className: 'review__hover'
        });
        let review__name = create({
            name: 'div',
            className: 'review__name',
            text: dataJson.name
        });
        let review__text = create({
            name: 'span',
            className: 'review__text',
            text: dataJson.short_text
        });
        let button = create({
            name: 'button',
            value: 'More',
            className: 'button button_color_black button__more'
        });

        $(modal_close).append(img);
        $(modal_form)
            .append(modal_close)
            .append(modal_form_name)
            .append(long_text);

        $(review__hover)
            .append(review__name)
            .append(review__text)
            .append(button);
        $(review)
            .append(review__picture)
            .append(review__hover);
        $(reviews__item).append(review);
        $('.reviews__list').append(reviews__item);
        $('.reviews__list').parent().append(modal_form);
        //МОДАЛЬНОЕ ОКНО В ОТЗЫВАХ
        $('button.button__more').click(function (event) {
            event.preventDefault();
            $('#overlay').fadeIn(300,
                function () {
                    $('.modal_form')
                        .css('display', 'block')
                        .animate({opacity: 1, top: '50%', left: '50%'}, 200);
                });
        });
        // Зaкрытие мoдaльнoгo oкнa
        $('.modal_close, #overlay').click(function () {
            $('.modal_form')
                .animate({opacity: 0, top: '35%'}, 200,
                    function () {
                        $(this).css('display', 'none');
                        $('#overlay').fadeOut(300);
                    }
                );
        });
    }
});